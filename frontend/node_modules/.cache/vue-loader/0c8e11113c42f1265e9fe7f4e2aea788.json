{"remainingRequest":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/patricia/hackaboss/PROYECTO/frontend/frontend/src/views/UserQuestions.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/src/views/UserQuestions.vue","mtime":1598218134533},{"path":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBxdWVzdGlvbiBmcm9tICJAL2NvbXBvbmVudHMvUXVlc3Rpb24udnVlIjsKaW1wb3J0IHNob3dxdWVzdGlvbnMgZnJvbSAiQC9jb21wb25lbnRzL0dldFF1ZXN0aW9ucy52dWUiOwoKaW1wb3J0IHsKICBnZXRBdXRoVG9rZW4sCiAgZ2V0SWRUb2tlbiwKICBhbGVydEZ1bmN0aW9uLAogIGNvbmZpZywKICBFTkRQT0lOVCwKfSBmcm9tICIuLi91dGlscy9oZWxwZXJzIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiVXNlclF1ZXN0aW9ucyIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHF1ZXN0aW9uczogW10sCiAgICAgIGFuc3dlcnM6IFtdLAogICAgICB0b2tlbjogIiIsCiAgICAgIGhpZGVRdWVzdGlvbjogZmFsc2UsCiAgICAgIHNob3dRdWVzdGlvbjogdHJ1ZSwKICAgICAgbm9RdWVzdGlvbnM6IGZhbHNlLAogICAgICBjb3VudDogIiIsCgogICAgICAvL3ZhcmlhYmxlcyBkZSBnZXN0aW9uIGRlIGVycm9yZXMKICAgICAgc2hvd0Vycm9yOiBmYWxzZSwKICAgICAgZXJyb3JNZXNzYWdlOiAiIiwKCiAgICAgIC8vVmFyaWFibGVzIGRlIGxhIHByZWd1bnRhIHF1ZSBzZSBkZWJlIGVkaXRhcgogICAgICB0aXRsZTogIiIsCiAgICAgIGNvbnRlbnQ6ICIiLAogICAgICBpZFF1ZXN0aW9uOiAiIiwKICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBxdWVzdGlvbiwKICAgIHNob3dxdWVzdGlvbnMsCiAgfSwKCiAgbWV0aG9kczogewogICAgLy9ERVNERSBMQSBWSVNUQQogICAgY2FuY2VsRWRpdGlvbigpIHsKICAgICAgdGhpcy50aXRsZSA9ICIiOwogICAgICB0aGlzLmNvbnRlbnQgPSAiIjsKICAgICAgdGhpcy5oaWRlUXVlc3Rpb24gPSBmYWxzZTsKICAgICAgdGhpcy5zaG93UXVlc3Rpb24gPSB0cnVlOwogICAgfSwKICAgIC8vVFJBRVIgTEFTIFBSRUdVTlRBUyBRVUUgSEEgSEVDSE8gRUwgVVNVQVJJTyBERVNERSBMQSBCQkRECiAgICBhc3luYyBnZXRRdWVzdGlvbnNBbndlcigpIHsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldChFTkRQT0lOVCArICIvbXktcXVlc3Rpb25zIiwgewogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICBBdXRob3JpemF0aW9uOiBnZXRBdXRoVG9rZW4oKSwKICAgICAgICAgIH0sCiAgICAgICAgfSk7CgogICAgICAgIGxldCByZXN1bHROdW1iZXIgPSByZXNwb25zZS5kYXRhLmRhdGE7CiAgICAgICAgaWYgKHJlc3VsdE51bWJlci5sZW5ndGggPT09IDApIHsKICAgICAgICAgIHRoaXMubm9RdWVzdGlvbnMgPSB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnF1ZXN0aW9ucyA9IHJlc3BvbnNlLmRhdGEuZGF0YTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgdGhpcy5zaG93RXJyb3IgPSB0cnVlOwogICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gZXJyb3IucmVzcG9uc2UuZGF0YS5tZXNzYWdlOwogICAgICB9CiAgICB9LAogICAgLy9UUkFFUiBMQVMgUkVTUFVFU1RBIERFIExBIFBSRUdVTlRBIFNFTEVDQ0lPTkFEQSBTSSBFUyBVU1VBUklPIExPR1VFQURPCiAgICBhc3luYyBnZXRBbnN3ZXJzKGlkUXVlc3Rpb24pIHsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldCgKICAgICAgICAgIEVORFBPSU5UICsgIi9hbnN3ZXIvIiArIGlkUXVlc3Rpb24sCiAgICAgICAgICBjb25maWcKICAgICAgICApOwogICAgICAgIHRoaXMuYW5zd2VycyA9IHJlc3BvbnNlLmRhdGEuZGF0YTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICB0aGlzLnNob3dFcnJvciA9IHRydWU7CiAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2UgPSBlcnJvci5yZXNwb25zZS5kYXRhLm1lc3NhZ2U7CiAgICAgIH0KICAgIH0sCiAgICAvL1ZPVEFSIFVOQSBSRVNQVUVTVEEKICAgIGFzeW5jIHJhdGVBbnN3ZXIoZGF0YSkgewogICAgICBsZXQgcmF0aW5nID0gewogICAgICAgIHJhdGluZzogZGF0YS5yYXRpbmcsCiAgICAgIH07CgogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MucG9zdCgKICAgICAgICAgIEVORFBPSU5UICsgIi9yYXRpbmcvYW5zd2VyLyIgKyBkYXRhLmlkLAogICAgICAgICAgcmF0aW5nLAogICAgICAgICAgY29uZmlnCiAgICAgICAgKTsKICAgICAgICBhbGVydEZ1bmN0aW9uKAogICAgICAgICAgInN1Y2Nlc3MiLAogICAgICAgICAgIlJhbmtpbmciLAogICAgICAgICAgYMKhSGFzIFZvdGFkbyBjb24gJHtkYXRhLnJhdGluZ30gcHVudG9zIWAKICAgICAgICApOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gZXJyb3IucmVzcG9uc2UuZGF0YS5tZXNzYWdlOwogICAgICAgIGF3YWl0IGFsZXJ0RnVuY3Rpb24oImVycm9yIiwgIk9wc3MhIiwgYFlhIGhhcyB2b3RhZG8gZXN0YSByZXNwdWVzdGFgKTsKICAgICAgfQogICAgfSwKCiAgICAvL0RFU0RFIEVMIENPTVBPTkVOVEUKICAgIGFzeW5jIGdldFF1ZXN0aW9uRGF0YShpZCkgewogICAgICB0aGlzLmhpZGVRdWVzdGlvbiA9IHRydWU7CgogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KEVORFBPSU5UICsgIi9xdWVzdGlvbi8iICsgaWQsIHsKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogZ2V0QXV0aFRva2VuKCksCiAgICAgICAgICB9LAogICAgICAgIH0pOwoKICAgICAgICB0aGlzLnRpdGxlID0gcmVzcG9uc2UuZGF0YS5kYXRhLnRpdGxlOwogICAgICAgIHRoaXMuY29udGVudCA9IHJlc3BvbnNlLmRhdGEuZGF0YS5xdWVzdGlvbl90ZXh0OwogICAgICAgIHRoaXMuaWRRdWVzdGlvbiA9IGlkOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwogICAgICB9CiAgICB9LAoKICAgIGFzeW5jIHNhdmVFZGl0aW9uKCkgewogICAgICAvL0RBVEEKICAgICAgbGV0IGRhdGEgPSB7CiAgICAgICAgdGl0bGU6IHRoaXMudGl0bGUsCiAgICAgICAgY29udGVudDogdGhpcy5jb250ZW50LAogICAgICB9OwoKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLnB1dCgKICAgICAgICAgIEVORFBPSU5UICsgIi9lZGl0LXF1ZXN0aW9uLyIgKyB0aGlzLmlkUXVlc3Rpb24sCiAgICAgICAgICBkYXRhLAogICAgICAgICAgY29uZmlnCiAgICAgICAgKTsKICAgICAgICAvL0FMRVJUIERFIEVESVRBUgogICAgICAgIGFsZXJ0RnVuY3Rpb24oCiAgICAgICAgICAic3VjY2VzcyIsCiAgICAgICAgICAiQWN0dWFsaXphZG8iLAogICAgICAgICAgYEhhcyBlZGl0YWRvIHR1IHByZWd1bnRhIGV4aXRvc2FtZW50ZWAKICAgICAgICApOwogICAgICAgIGF3YWl0IHRoaXMuZ2V0UXVlc3Rpb25zQW53ZXIoKTsKICAgICAgICB0aGlzLmhpZGVRdWVzdGlvbiA9IGZhbHNlOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIHRoaXMuc2hvd0Vycm9yID0gdHJ1ZTsKICAgICAgICB0aGlzLmVycm9yTWVzc2FnZSA9IGVycm9yLnJlc3BvbnNlLmRhdGEubWVzc2FnZTsKICAgICAgfQoKICAgICAgLy9BTEVSVCBERSBFRElUQVIKICAgICAgYWxlcnRGdW5jdGlvbigKICAgICAgICAic3VjY2VzcyIsCiAgICAgICAgIkFjdHVhbGl6YWRvIiwKICAgICAgICBgSGFzIGVkaXRhZG8gdHUgcHJlZ3VudGEgZXhpdG9zYW1lbnRlYAogICAgICApOwogICAgfSwKICAgIGFzeW5jIGRlbGV0ZVF1ZXN0aW9uKCkgewogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZGVsZXRlKAogICAgICAgICAgRU5EUE9JTlQgKyAiL2RlbGV0ZS1xdWVzdGlvbi8iICsgdGhpcy5pZFF1ZXN0aW9uLAogICAgICAgICAgY29uZmlnCiAgICAgICAgKTsKICAgICAgICBhbGVydEZ1bmN0aW9uKCJCb3JyYWRhISIsICJUdSBwcmVndW50YSBoYSBzaWRvIGJvcnJhZGEuIiwgInN1Y2Nlc3MiKTsKICAgICAgICB0aGlzLmhpZGVRdWVzdGlvbiA9IGZhbHNlOwogICAgICAgIGF3YWl0IHRoaXMuZ2V0UXVlc3Rpb25zQW53ZXIoKTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICB0aGlzLnNob3dFcnJvciA9IHRydWU7CiAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2UgPSBlcnJvci5yZXNwb25zZS5kYXRhLm1lc3NhZ2U7CiAgICAgIH0KICAgIH0sCiAgfSwKICBhc3luYyBjcmVhdGVkKCkgewogICAgdGhpcy50b2tlbiA9IGdldEF1dGhUb2tlbigpOwogICAgYXdhaXQgdGhpcy5nZXRRdWVzdGlvbnNBbndlcigpOwogIH0sCn07Cg=="},{"version":3,"sources":["UserQuestions.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UserQuestions.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"container\">\n    <span id=\"sectionTitle\" v-show=\"!hideQuestion\">\n      <h1>Tus preguntas</h1>\n      <h2>Aquí puedes ver las preguntas que has realizado</h2>\n    </span>\n\n    <showquestions\n      id=\"questionsBody\"\n      v-if=\"!hideQuestion\"\n      :questions=\"questions\"\n      :answers=\"answers\"\n      @showAnswers=\"getAnswers\"\n      @rateAnswer=\"rateAnswer\"\n      @editquestion=\"getQuestionData\"\n    />\n\n    <div v-show=\"noQuestions\">\n      <p>Aww... aun no has preguntado nada aún</p>\n      <p>¿Quieres hacer una?</p>\n      <router-link :to=\"{ name: 'NewQuestion' }\">Hacer pregunta</router-link>\n    </div>\n\n    <!--EDITAR PREGUNTA-->\n    <div class=\"questionEdit\" v-if=\"hideQuestion\">\n      <h2>EDITAR PREGUNTA:</h2>\n\n      <h3>TITULO:</h3>\n      <input class=\"titleInput\" type=\"text\" :placeholder=\"title\" v-model=\"title\" />\n\n      <textarea type=\"text\" name=\"textQuestion\" rows=\"4\" :placeholder=\"content\" v-model=\"content\"></textarea>\n\n      <div class=\"buttonsContainer\">\n        <button class=\"deleteButton\" @click=\"deleteQuestion()\">Borrar pregunta</button>\n        <div class=\"buttonsInsideContainer\">\n          <button @click=\"saveEdition()\">GUARDAR</button>\n          <button class=\"cancelButton\" @click=\"cancelEdition()\">CANCELAR</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport question from \"@/components/Question.vue\";\nimport showquestions from \"@/components/GetQuestions.vue\";\n\nimport {\n  getAuthToken,\n  getIdToken,\n  alertFunction,\n  config,\n  ENDPOINT,\n} from \"../utils/helpers\";\n\nexport default {\n  name: \"UserQuestions\",\n  data() {\n    return {\n      questions: [],\n      answers: [],\n      token: \"\",\n      hideQuestion: false,\n      showQuestion: true,\n      noQuestions: false,\n      count: \"\",\n\n      //variables de gestion de errores\n      showError: false,\n      errorMessage: \"\",\n\n      //Variables de la pregunta que se debe editar\n      title: \"\",\n      content: \"\",\n      idQuestion: \"\",\n    };\n  },\n  components: {\n    question,\n    showquestions,\n  },\n\n  methods: {\n    //DESDE LA VISTA\n    cancelEdition() {\n      this.title = \"\";\n      this.content = \"\";\n      this.hideQuestion = false;\n      this.showQuestion = true;\n    },\n    //TRAER LAS PREGUNTAS QUE HA HECHO EL USUARIO DESDE LA BBDD\n    async getQuestionsAnwer() {\n      try {\n        const response = await axios.get(ENDPOINT + \"/my-questions\", {\n          headers: {\n            Authorization: getAuthToken(),\n          },\n        });\n\n        let resultNumber = response.data.data;\n        if (resultNumber.length === 0) {\n          this.noQuestions = true;\n        } else {\n          this.questions = response.data.data;\n        }\n      } catch (error) {\n        this.showError = true;\n        this.errorMessage = error.response.data.message;\n      }\n    },\n    //TRAER LAS RESPUESTA DE LA PREGUNTA SELECCIONADA SI ES USUARIO LOGUEADO\n    async getAnswers(idQuestion) {\n      try {\n        const response = await axios.get(\n          ENDPOINT + \"/answer/\" + idQuestion,\n          config\n        );\n        this.answers = response.data.data;\n      } catch (error) {\n        this.showError = true;\n        this.errorMessage = error.response.data.message;\n      }\n    },\n    //VOTAR UNA RESPUESTA\n    async rateAnswer(data) {\n      let rating = {\n        rating: data.rating,\n      };\n\n      try {\n        const response = await axios.post(\n          ENDPOINT + \"/rating/answer/\" + data.id,\n          rating,\n          config\n        );\n        alertFunction(\n          \"success\",\n          \"Ranking\",\n          `¡Has Votado con ${data.rating} puntos!`\n        );\n      } catch (error) {\n        this.errorMessage = error.response.data.message;\n        await alertFunction(\"error\", \"Opss!\", `Ya has votado esta respuesta`);\n      }\n    },\n\n    //DESDE EL COMPONENTE\n    async getQuestionData(id) {\n      this.hideQuestion = true;\n\n      try {\n        const response = await axios.get(ENDPOINT + \"/question/\" + id, {\n          headers: {\n            Authorization: getAuthToken(),\n          },\n        });\n\n        this.title = response.data.data.title;\n        this.content = response.data.data.question_text;\n        this.idQuestion = id;\n      } catch (error) {\n        console.error(error);\n      }\n    },\n\n    async saveEdition() {\n      //DATA\n      let data = {\n        title: this.title,\n        content: this.content,\n      };\n\n      try {\n        const response = await axios.put(\n          ENDPOINT + \"/edit-question/\" + this.idQuestion,\n          data,\n          config\n        );\n        //ALERT DE EDITAR\n        alertFunction(\n          \"success\",\n          \"Actualizado\",\n          `Has editado tu pregunta exitosamente`\n        );\n        await this.getQuestionsAnwer();\n        this.hideQuestion = false;\n      } catch (error) {\n        this.showError = true;\n        this.errorMessage = error.response.data.message;\n      }\n\n      //ALERT DE EDITAR\n      alertFunction(\n        \"success\",\n        \"Actualizado\",\n        `Has editado tu pregunta exitosamente`\n      );\n    },\n    async deleteQuestion() {\n      try {\n        const response = await axios.delete(\n          ENDPOINT + \"/delete-question/\" + this.idQuestion,\n          config\n        );\n        alertFunction(\"Borrada!\", \"Tu pregunta ha sido borrada.\", \"success\");\n        this.hideQuestion = false;\n        await this.getQuestionsAnwer();\n      } catch (error) {\n        this.showError = true;\n        this.errorMessage = error.response.data.message;\n      }\n    },\n  },\n  async created() {\n    this.token = getAuthToken();\n    await this.getQuestionsAnwer();\n  },\n};\n</script>\n\n<style scoped>\n* {\n  text-align: left;\n  margin-bottom: 1rem;\n}\n\n.questionEdit {\n  /*  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n  width: 100%; */\n  background-color: var(--ligthColor);\n  padding: 2rem 0 2rem 2rem;\n  border-radius: 0.5rem;\n  -webkit-box-shadow: 0px 13px 14px -13px rgba(173, 173, 173, 0.64);\n  -moz-box-shadow: 0px 13px 14px -13px rgba(173, 173, 173, 0.64);\n  box-shadow: 0px 13px 14px -13px rgba(173, 173, 173, 0.64);\n}\n\ntextarea {\n  height: 20rem;\n}\n@media only screen and (min-width: 600px) {\n  .buttonsInsideContainer {\n    flex-direction: row;\n    flex-wrap: wrap;\n    justify-content: space-around;\n  }\n\n  .buttonsContainer {\n    margin: 0;\n    flex-direction: row;\n    align-items: center;\n  }\n  .deleteButton {\n    background-position: 3% 50%;\n    flex-grow: 1;\n  }\n}\n@media only screen and (min-width: 1200px) {\n  .buttonsContainer {\n    align-items: center;\n    justify-content: space-between;\n    width: 95%;\n  }\n  .deleteButton {\n    background-position: 1% 50%;\n    padding: 2rem;\n    flex-grow: 0;\n  }\n}\n</style>\n"]}]}