{"remainingRequest":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/patricia/hackaboss/PROYECTO/frontend/frontend/src/views/UserQuestions.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/src/views/UserQuestions.vue","mtime":1596928965337},{"path":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBTd2FsIGZyb20gInN3ZWV0YWxlcnQyIjsKaW1wb3J0IHsKICBnZXRBdXRoVG9rZW4sCiAgZ2V0SWRUb2tlbiwKICBhbGVydEZ1bmN0aW9uLAogIGNvbmZpZywKfSBmcm9tICIuLi91dGlscy9oZWxwZXJzIjsKCmltcG9ydCBTaG93UXVlc3Rpb25zQW5zd2VyIGZyb20gIkAvY29tcG9uZW50cy9HZXRRdWVzdGlvbkFuc3dlci52dWUiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJVc2VyUXVlc3Rpb25zIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgVXNlclF1ZXN0aW9uOiBbXSwKICAgICAgVXNlckFuc3dlcnM6IFtdLAogICAgICB0b2tlbjogZ2V0QXV0aFRva2VuKCksCiAgICAgIGhpZGVRdWVzdGlvbjogZmFsc2UsCiAgICAgIHNob3dRdWVzdGlvbjogdHJ1ZSwKICAgICAgbm9RdWVzdGlvbnM6IGZhbHNlLAogICAgICBjb3VudDogIiIsCgogICAgICAvL3ZhcmlhYmxlcyBkZSBnZXN0aW9uIGRlIGVycm9yZXMKICAgICAgc2hvd0Vycm9yOiBmYWxzZSwKICAgICAgZXJyb3JNZXNzYWdlOiAiIiwKCiAgICAgIC8vVmFyaWFibGVzIGRlIGNvbXBvbmVudGUKICAgICAgdGl0bGU6ICIiLAogICAgICBjb250ZW50OiAiIiwKICAgICAgaWRRdWVzdGlvbjogIiIsCiAgICB9OwogIH0sCiAgY29tcG9uZW50czogewogICAgU2hvd1F1ZXN0aW9uc0Fuc3dlciwKICB9LAoKICBtZXRob2RzOiB7CiAgICAvL0RFU0RFIExBIFZJU1RBCiAgICBjYW5jZWxFZGl0aW9uKCkgewogICAgICB0aGlzLnRpdGxlID0gIiI7CiAgICAgIHRoaXMuY29udGVudCA9ICIiOwogICAgICB0aGlzLmhpZGVRdWVzdGlvbiA9IGZhbHNlOwogICAgICB0aGlzLnNob3dRdWVzdGlvbiA9IHRydWU7CiAgICB9LAogICAgLy9ERVNERSBFTCBDT01QT05FTlRFCiAgICBnZXRRdWVzdGlvbkRhdGEocXVlc3Rpb25EYXRhKSB7CiAgICAgIHRoaXMuaGlkZVF1ZXN0aW9uID0gdHJ1ZTsKICAgICAgdGhpcy5zaG93UXVlc3Rpb24gPSBmYWxzZTsKICAgICAgdGhpcy50aXRsZSA9IHF1ZXN0aW9uRGF0YS50aXRsZTsKICAgICAgdGhpcy5jb250ZW50ID0gcXVlc3Rpb25EYXRhLnF1ZXN0aW9uX3RleHQ7CiAgICAgIHRoaXMuaWRRdWVzdGlvbiA9IHF1ZXN0aW9uRGF0YS5pZDsKICAgIH0sCiAgICAvL0RFU0RFIExBIEJCREQKICAgIGFzeW5jIGdldFF1ZXN0aW9uc0Fud2VyKCkgewogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KAogICAgICAgICAgImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9teS1xdWVzdGlvbnMvIiwKICAgICAgICAgIGNvbmZpZwogICAgICAgICk7CgogICAgICAgIGxldCByZXN1bHROdW1iZXIgPSByZXNwb25zZS5kYXRhLnJlc3VsdEFuc3dlcnM7CiAgICAgICAgaWYgKHJlc3VsdE51bWJlci5sZW5ndGggPT09IDApIHsKICAgICAgICAgIHRoaXMubm9RdWVzdGlvbnMgPSB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLlVzZXJRdWVzdGlvbiA9IHJlc3BvbnNlLmRhdGEucmVzdWx0QW5zd2VyczsKICAgICAgICB9CiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEucmVzdWx0QW5zd2Vyc1swXS5hbnN3ZXIubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICB0aGlzLmNvdW50ID0gIk5PIEhBWSBSRVNQVUVTVEFTIEHDmk4iOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmNvdW50ID0gcmVzcG9uc2UuZGF0YS5yZXN1bHRBbnN3ZXJzWzBdLmFuc3dlci5sZW5ndGg7CiAgICAgICAgICB0aGlzLlVzZXJBbnN3ZXJzID0gcmVzcG9uc2UuZGF0YS5yZXN1bHRBbnN3ZXJzWzBdLmFuc3dlcjsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgdGhpcy5zaG93RXJyb3IgPSB0cnVlOwogICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gZXJyb3IucmVzcG9uc2UuZGF0YS5tZXNzYWdlOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgc2F2ZUVkaXRpb24oKSB7CiAgICAgIC8vREFUQQogICAgICBsZXQgZGF0YSA9IHsKICAgICAgICB0aXRsZTogdGhpcy50aXRsZSwKICAgICAgICBjb250ZW50OiB0aGlzLmNvbnRlbnQsCiAgICAgIH07CgogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MucHV0KAogICAgICAgICAgImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9lZGl0LXF1ZXN0aW9uLyIgKyB0aGlzLmlkUXVlc3Rpb24sCiAgICAgICAgICBkYXRhLAogICAgICAgICAgY29uZmlnCiAgICAgICAgKTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICB0aGlzLnNob3dFcnJvciA9IHRydWU7CiAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2UgPSBlcnJvci5yZXNwb25zZS5kYXRhLm1lc3NhZ2U7CiAgICAgIH0KCiAgICAgIC8vQUxFUlQgREUgRURJVEFSCiAgICAgIGFsZXJ0RnVuY3Rpb24oCiAgICAgICAgInN1Y2Nlc3MiLAogICAgICAgICJBY3R1YWxpemFkbyIsCiAgICAgICAgYEhhcyBlZGl0YWRvIHR1IHByZWd1bnRhIGV4aXRvc2FtZW50ZWAKICAgICAgKTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7CiAgICAgIH0sIDEwMDApOwogICAgfSwKICAgIGFzeW5jIGRlbGV0ZVF1ZXN0aW9uKCkgewogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZGVsZXRlKAogICAgICAgICAgImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9kZWxldGUtcXVlc3Rpb24vIiArIHRoaXMuaWRRdWVzdGlvbiwKICAgICAgICAgIGNvbmZpZwogICAgICAgICk7CiAgICAgICAgdGhpcy5hbGVydEZ1bmN0aW9uKAogICAgICAgICAgIkJvcnJhZGEhIiwKICAgICAgICAgICJUdSBwcmVndW50YSBoYSBzaWRvIGJvcnJhZGEuIiwKICAgICAgICAgICJzdWNjZXNzIgogICAgICAgICk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgdGhpcy5zaG93RXJyb3IgPSB0cnVlOwogICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gZXJyb3IucmVzcG9uc2UuZGF0YS5tZXNzYWdlOwogICAgICB9CgogICAgICAvL0FMRVJUIERFIEVESVRBUgogICAgICAvKiBTd2FsLmZpcmUoewogICAgICAgIHRpdGxlOiAiwr9Fc3RhcyBzZWd1cm8gcXVlIHF1aWVyZXMgYm9ycmFyIGVzdGEgcHJlZ3VudGE/IiwKICAgICAgICB0ZXh0OiAiIiwKICAgICAgICBpY29uOiAid2FybmluZyIsCiAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICBjb25maXJtQnV0dG9uQ29sb3I6ICIjMzA4NWQ2IiwKICAgICAgICBjYW5jZWxCdXR0b25Db2xvcjogIiNkMzMiLAogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAiU8OtISwgQk9SUkFMQSIsCiAgICAgIH0pLnRoZW4oKHJlc3VsdCkgPT4gewogICAgICAgIGlmIChyZXN1bHQudmFsdWUpIHsKCiAgICAgICAgICAKCiAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgfSwgMTAwMCk7IAogICAgICAgIH0KICAgICAgfSk7ICovCiAgICB9LAogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0UXVlc3Rpb25zQW53ZXIoKTsKICB9LAp9Owo="},{"version":3,"sources":["UserQuestions.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UserQuestions.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <div>\n      <router-link :to=\"{ name: 'NewQuestion' }\">Hacer nueva pregunta</router-link>\n    </div>\n    <ShowQuestionsAnswer\n      :questions=\"UserQuestion\"\n      :answer=\"UserAnswers\"\n      :count=\"count\"\n      v-on:questionData=\"getQuestionData\"\n      v-show=\"showQuestion\"\n    />\n    <div v-show=\"noQuestions\">\n      <p>Aww... aun no has preguntado nada aún</p>\n      <p>¿Quieres hacer una?</p>\n      <router-link :to=\"{ name: 'NewQuestion' }\">Hacer pregunta</router-link>\n    </div>\n\n    <!--EDITAR PREGUNTA-->\n    <div v-show=\"hideQuestion\">\n      <h2>EDITAR PREGUNTA:</h2>\n      <h3>TITULO:</h3>\n      <input type=\"text\" :placeholder=\"title\" v-model=\"title\" />\n      <textarea type=\"text\" name=\"textQuestion\" rows=\"4\" :placeholder=\"content\" v-model=\"content\"></textarea>\n      <p v-show=\"showError\">{{ errorMessage }}</p>\n      <button @click=\"deleteQuestion()\">Borrar pregunta</button>\n      <div>\n        <button @click=\"saveEdition()\">GUARDAR</button>\n        <button class=\"cancelButton\" @click=\"cancelEdition()\">CANCELAR</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport Swal from \"sweetalert2\";\nimport {\n  getAuthToken,\n  getIdToken,\n  alertFunction,\n  config,\n} from \"../utils/helpers\";\n\nimport ShowQuestionsAnswer from \"@/components/GetQuestionAnswer.vue\";\n\nexport default {\n  name: \"UserQuestions\",\n  data() {\n    return {\n      UserQuestion: [],\n      UserAnswers: [],\n      token: getAuthToken(),\n      hideQuestion: false,\n      showQuestion: true,\n      noQuestions: false,\n      count: \"\",\n\n      //variables de gestion de errores\n      showError: false,\n      errorMessage: \"\",\n\n      //Variables de componente\n      title: \"\",\n      content: \"\",\n      idQuestion: \"\",\n    };\n  },\n  components: {\n    ShowQuestionsAnswer,\n  },\n\n  methods: {\n    //DESDE LA VISTA\n    cancelEdition() {\n      this.title = \"\";\n      this.content = \"\";\n      this.hideQuestion = false;\n      this.showQuestion = true;\n    },\n    //DESDE EL COMPONENTE\n    getQuestionData(questionData) {\n      this.hideQuestion = true;\n      this.showQuestion = false;\n      this.title = questionData.title;\n      this.content = questionData.question_text;\n      this.idQuestion = questionData.id;\n    },\n    //DESDE LA BBDD\n    async getQuestionsAnwer() {\n      try {\n        const response = await axios.get(\n          \"http://localhost:3000/my-questions/\",\n          config\n        );\n\n        let resultNumber = response.data.resultAnswers;\n        if (resultNumber.length === 0) {\n          this.noQuestions = true;\n        } else {\n          this.UserQuestion = response.data.resultAnswers;\n        }\n        if (response.data.resultAnswers[0].answer.length === 0) {\n          this.count = \"NO HAY RESPUESTAS AÚN\";\n        } else {\n          this.count = response.data.resultAnswers[0].answer.length;\n          this.UserAnswers = response.data.resultAnswers[0].answer;\n        }\n      } catch (error) {\n        this.showError = true;\n        this.errorMessage = error.response.data.message;\n      }\n    },\n    async saveEdition() {\n      //DATA\n      let data = {\n        title: this.title,\n        content: this.content,\n      };\n\n      try {\n        const response = await axios.put(\n          \"http://localhost:3000/edit-question/\" + this.idQuestion,\n          data,\n          config\n        );\n      } catch (error) {\n        this.showError = true;\n        this.errorMessage = error.response.data.message;\n      }\n\n      //ALERT DE EDITAR\n      alertFunction(\n        \"success\",\n        \"Actualizado\",\n        `Has editado tu pregunta exitosamente`\n      );\n      setTimeout(function () {\n        location.reload();\n      }, 1000);\n    },\n    async deleteQuestion() {\n      try {\n        const response = await axios.delete(\n          \"http://localhost:3000/delete-question/\" + this.idQuestion,\n          config\n        );\n        this.alertFunction(\n          \"Borrada!\",\n          \"Tu pregunta ha sido borrada.\",\n          \"success\"\n        );\n      } catch (error) {\n        this.showError = true;\n        this.errorMessage = error.response.data.message;\n      }\n\n      //ALERT DE EDITAR\n      /* Swal.fire({\n        title: \"¿Estas seguro que quieres borrar esta pregunta?\",\n        text: \"\",\n        icon: \"warning\",\n        showCancelButton: true,\n        confirmButtonColor: \"#3085d6\",\n        cancelButtonColor: \"#d33\",\n        confirmButtonText: \"Sí!, BORRALA\",\n      }).then((result) => {\n        if (result.value) {\n\n          \n\n           setTimeout(function () {\n            location.reload();\n          }, 1000); \n        }\n      }); */\n    },\n  },\n  created() {\n    this.getQuestionsAnwer();\n  },\n};\n</script>\n\n<style scoped></style>\n"]}]}