{"remainingRequest":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/patricia/hackaboss/PROYECTO/frontend/frontend/src/views/UserAnswers.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/src/views/UserAnswers.vue","mtime":1599157819000},{"path":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vU1RPUkFHRSBERSBMT1MgREFUT1MgREUgVVNVQVJJTwppbXBvcnQgdXNlckRhdGEgZnJvbSAiQC9kYXRhU3RvcmFnZS91c2VyRGF0YSI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBTd2FsIGZyb20gInN3ZWV0YWxlcnQyIjsKaW1wb3J0IHsKICBnZXRBdXRoVG9rZW4sCiAgZ2V0SWRUb2tlbiwKICBhbGVydEZ1bmN0aW9uLAogIGNvbmZpZywKICBFTkRQT0lOVCwKfSBmcm9tICIuLi91dGlscy9oZWxwZXJzIjsKCmltcG9ydCBhbnN3ZXJjb21wb25lbnQgZnJvbSAiQC9jb21wb25lbnRzL0Fuc3dlckNvbXBvbmVudC52dWUiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJVc2VyQW5zd2VycyIsCiAgY29tcG9uZW50czogewogICAgYW5zd2VyY29tcG9uZW50LAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIC8vVmFyaWFibGUgZGUgdmlzdGEKICAgICAgYmJkZEFuc3dlcnM6IFtdLAoKICAgICAgLy92YXJpYWJsZXMgZGUgZ2VzdGlvbiBkZSBlcnJvcmVzCiAgICAgIHNob3dFcnJvcjogZmFsc2UsCiAgICAgIGVycm9yTWVzc2FnZTogIiIsCgogICAgICBzaGFyZWRTdG9yZTogdXNlckRhdGEuc3RhdGUsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHRva2VuKCkgewogICAgICByZXR1cm4gdGhpcy5zaGFyZWRTdG9yZS50b2tlbjsKICAgIH0sCiAgICByb3V0ZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHJvdXRlLm5hbWU7CiAgICB9LAogIH0sCiAgbWV0aG9kczogewogICAgLy9UUkFFUiBSRVNQVUVTVEFTIEhFQ0hBUyBQT1IgRUwgVVNVQVJJTyBERVNERSBMQSBCQkRECiAgICBhc3luYyBnZXRBbnN3ZXJzKCkgewogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KEVORFBPSU5UICsgIi9hbnN3ZXIiLCB7CiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IHRoaXMudG9rZW4sCiAgICAgICAgICB9LAogICAgICAgIH0pOwogICAgICAgIHRoaXMuYmJkZEFuc3dlcnMgPSByZXNwb25zZS5kYXRhLmRhdGE7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgdGhpcy5zaG93RXJyb3IgPSB0cnVlOwogICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gZXJyb3IucmVzcG9uc2UuZGF0YS5tZXNzYWdlOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgcG9zdEVkaXRlZEFuc3dlcihjb21wb25lbnREYXRhKSB7CiAgICAgIHRyeSB7CiAgICAgICAgbGV0IGRhdGEgPSB7CiAgICAgICAgICBjb250ZW50OiBjb21wb25lbnREYXRhLmN1cnJlbnRBbnN3ZXIsCiAgICAgICAgfTsKCiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5wdXQoCiAgICAgICAgICBFTkRQT0lOVCArICIvZWRpdC1hbnN3ZXIvIiArIGNvbXBvbmVudERhdGEuaWQsCiAgICAgICAgICBkYXRhLAogICAgICAgICAgY29uZmlnCiAgICAgICAgKTsKCiAgICAgICAgYWxlcnRGdW5jdGlvbigic3VjY2VzcyIsICJFZGl0YWRhISIsICJUdSByZXNwdWVzdGEgaGEgc2lkbyBlZGl0YWRhLiIpOwogICAgICAgIC8vbG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgYXdhaXQgdGhpcy5nZXRBbnN3ZXJzKCk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgdGhpcy5zaG93RXJyb3IgPSB0cnVlOwogICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gZXJyb3IucmVzcG9uc2UuZGF0YS5tZXNzYWdlOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgZGVsZXRlQW5zd2VyKGlkQW5zd2VyKSB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5kZWxldGUoCiAgICAgICAgICBFTkRQT0lOVCArICIvZGVsZXRlLWFuc3dlci8iICsgaWRBbnN3ZXIsCiAgICAgICAgICBjb25maWcKICAgICAgICApOwoKICAgICAgICBhbGVydEZ1bmN0aW9uKCJzdWNjZXNzIiwgIkJvcnJhZGEhIiwgIlR1IHJlc3B1ZXN0YSBoYSBzaWRvIGJvcnJhZGEuIik7CgogICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIHRoaXMuc2hvd0Vycm9yID0gdHJ1ZTsKICAgICAgICB0aGlzLmVycm9yTWVzc2FnZSA9IGVycm9yLnJlc3BvbnNlLmRhdGEubWVzc2FnZTsKICAgICAgfQogICAgfSwKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldEFuc3dlcnMoKTsKICB9LAp9Owo="},{"version":3,"sources":["UserAnswers.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UserAnswers.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"container\">\n    <span id=\"sectionTitle\">\n      <h1>Tus respuestas</h1>\n      <h2>Aqu√≠ puedes ver las respuestas que has realizado</h2>\n    </span>\n    <p v-show=\"showError\">{{ errorMessage }}</p>\n    <answercomponent\n      :answers=\"bbddAnswers\"\n      v-on:editedAnswer=\"postEditedAnswer\"\n      v-on:deleteAnswer=\"deleteAnswer\"\n    />\n  </div>\n</template>\n\n<script>\n//STORAGE DE LOS DATOS DE USUARIO\nimport userData from \"@/dataStorage/userData\";\nimport axios from \"axios\";\nimport Swal from \"sweetalert2\";\nimport {\n  getAuthToken,\n  getIdToken,\n  alertFunction,\n  config,\n  ENDPOINT,\n} from \"../utils/helpers\";\n\nimport answercomponent from \"@/components/AnswerComponent.vue\";\n\nexport default {\n  name: \"UserAnswers\",\n  components: {\n    answercomponent,\n  },\n  data() {\n    return {\n      //Variable de vista\n      bbddAnswers: [],\n\n      //variables de gestion de errores\n      showError: false,\n      errorMessage: \"\",\n\n      sharedStore: userData.state,\n    };\n  },\n  computed: {\n    token() {\n      return this.sharedStore.token;\n    },\n    route() {\n      return this.$route.name;\n    },\n  },\n  methods: {\n    //TRAER RESPUESTAS HECHAS POR EL USUARIO DESDE LA BBDD\n    async getAnswers() {\n      try {\n        const response = await axios.get(ENDPOINT + \"/answer\", {\n          headers: {\n            Authorization: this.token,\n          },\n        });\n        this.bbddAnswers = response.data.data;\n      } catch (error) {\n        this.showError = true;\n        this.errorMessage = error.response.data.message;\n      }\n    },\n    async postEditedAnswer(componentData) {\n      try {\n        let data = {\n          content: componentData.currentAnswer,\n        };\n\n        const response = await axios.put(\n          ENDPOINT + \"/edit-answer/\" + componentData.id,\n          data,\n          config\n        );\n\n        alertFunction(\"success\", \"Editada!\", \"Tu respuesta ha sido editada.\");\n        //location.reload();\n        await this.getAnswers();\n      } catch (error) {\n        this.showError = true;\n        this.errorMessage = error.response.data.message;\n      }\n    },\n    async deleteAnswer(idAnswer) {\n      try {\n        const response = await axios.delete(\n          ENDPOINT + \"/delete-answer/\" + idAnswer,\n          config\n        );\n\n        alertFunction(\"success\", \"Borrada!\", \"Tu respuesta ha sido borrada.\");\n\n        location.reload();\n      } catch (error) {\n        this.showError = true;\n        this.errorMessage = error.response.data.message;\n      }\n    },\n  },\n  created() {\n    this.getAnswers();\n  },\n};\n</script>\n\n<style scoped>\n/* .answersContainer {\n  margin: 1rem;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n  align-items: center;\n  align-content: space-between;\n  background-color: dodgerblue;\n}\n\n@media only screen and (min-width: 600px) {\n}\n@media only screen and (min-width: 1200px) {\n  .dashHomeContent {\n    margin: 2rem;\n    max-width: 65vw;\n  }\n  .answersContainer {\n    margin-bottom: 3rem;\n  }\n} */\n</style>\n"]}]}