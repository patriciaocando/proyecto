{"remainingRequest":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/patricia/hackaboss/PROYECTO/frontend/frontend/src/views/UserQuestions.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/src/views/UserQuestions.vue","mtime":1599077919534},{"path":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vU1RPUkFHRSBERSBMT1MgREFUT1MgREUgVVNVQVJJTwppbXBvcnQgdXNlckRhdGEgZnJvbSAiQC9kYXRhU3RvcmFnZS91c2VyRGF0YSI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBhcGkgZnJvbSAiQC9hcGkvYXBpLmpzIjsKCmltcG9ydCBnZXRxdWVzdGlvbnMgZnJvbSAiQC9jb21wb25lbnRzL0dldFF1ZXN0aW9ucy52dWUiOwoKaW1wb3J0IHsKICBnZXRBdXRoVG9rZW4sCiAgZ2V0SWRUb2tlbiwKICBhbGVydEZ1bmN0aW9uLAogIGNvbmZpZywKICBFTkRQT0lOVCwKfSBmcm9tICIuLi91dGlscy9oZWxwZXJzIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiVXNlclF1ZXN0aW9ucyIsCiAgY29tcG9uZW50czogewogICAgZ2V0cXVlc3Rpb25zLAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHF1ZXN0aW9uczogW10sCiAgICAgIGFuc3dlcnM6IFtdLAogICAgICBub1F1ZXN0aW9uczogZmFsc2UsCgogICAgICAvL3ZhcmlhYmxlcyBkZSBnZXN0aW9uIGRlIGVycm9yZXMKICAgICAgc2hvd0Vycm9yOiBmYWxzZSwKICAgICAgZXJyb3JNZXNzYWdlOiAiIiwKCiAgICAgIHNoYXJlZFN0b3JlOiB1c2VyRGF0YS5zdGF0ZSwKICAgIH07CiAgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIHRva2VuKCkgewogICAgICByZXR1cm4gdGhpcy5zaGFyZWRTdG9yZS50b2tlbjsKICAgIH0sCiAgICByb3V0ZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHJvdXRlLm5hbWU7CiAgICB9LAogIH0sCiAgbWV0aG9kczogewogICAgLy9UUkFFUiBMQVMgUFJFR1VOVEFTIFFVRSBIQSBIRUNITyBFTCBVU1VBUklPIERFU0RFIExBIEJCREQKICAgIGFzeW5jIGdldFF1ZXN0aW9uc0Fud2VyKCkgewogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXBpLnVzZXJRdWVzdGlvbnMoKTsKICAgICAgICB0aGlzLnF1ZXN0aW9ucyA9IHJlc3BvbnNlOwoKICAgICAgICBpZiAodGhpcy5xdWVzdGlvbnMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICB0aGlzLm5vUXVlc3Rpb25zID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgdGhpcy5zaG93RXJyb3IgPSB0cnVlOwogICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gZXJyb3I7CiAgICAgIH0KICAgIH0sCiAgICAvL1RSQUVSIExBUyBSRVNQVUVTVEEgREUgTEEgUFJFR1VOVEEgU0VMRUNDSU9OQURBIFNJIEVTIFVTVUFSSU8gTE9HVUVBRE8KICAgIGFzeW5jIGdldEFuc3dlcnNCeUlkKGlkUXVlc3Rpb24pIHsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFwaS5nZXRBbnN3ZXJzKGlkUXVlc3Rpb24pOwogICAgICAgIHRoaXMuYW5zd2VycyA9IHJlc3BvbnNlOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIHRoaXMuc2hvd0Vycm9yID0gdHJ1ZTsKICAgICAgICB0aGlzLmVycm9yTWVzc2FnZSA9IGVycm9yOwogICAgICB9CiAgICB9LAogICAgLy9WT1RBUiBVTkEgUkVTUFVFU1RBCiAgICBhc3luYyByYXRlQW5zd2VyKGRhdGEpIHsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFwaS5wb3N0UmF0aW5nKGRhdGEpOwoKICAgICAgICBhbGVydEZ1bmN0aW9uKAogICAgICAgICAgInN1Y2Nlc3MiLAogICAgICAgICAgIlJhbmtpbmciLAogICAgICAgICAgYMKhSGFzIFZvdGFkbyBjb24gJHtkYXRhLnJhdGluZ30gcHVudG9zIWAKICAgICAgICApOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGF3YWl0IGFsZXJ0RnVuY3Rpb24oImVycm9yIiwgIk9wc3MhIiwgYFlhIGhhcyB2b3RhZG8gZXN0YSByZXNwdWVzdGFgKTsKICAgICAgfQogICAgfSwKCiAgICBhc3luYyBnZXRRdWVzdGlvbkRhdGEoaWQpIHsKICAgICAgdGhpcy5oaWRlUXVlc3Rpb24gPSB0cnVlOwoKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldChFTkRQT0lOVCArICIvcXVlc3Rpb24vIiArIGlkLCB7CiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IHRoaXMudG9rZW4sCiAgICAgICAgICB9LAogICAgICAgIH0pOwoKICAgICAgICB0aGlzLnRpdGxlID0gcmVzcG9uc2UuZGF0YS5kYXRhLnRpdGxlOwogICAgICAgIHRoaXMuY29udGVudCA9IHJlc3BvbnNlLmRhdGEuZGF0YS5xdWVzdGlvbl90ZXh0OwogICAgICAgIHRoaXMuaWRRdWVzdGlvbiA9IGlkOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwogICAgICB9CiAgICB9LAogICAgcXVlc3Rpb25FZGl0ZWQoKSB7CiAgICAgIC8vQUxFUlQgREUgRURJVEFSCiAgICAgIGFsZXJ0RnVuY3Rpb24oCiAgICAgICAgInN1Y2Nlc3MiLAogICAgICAgICJBY3R1YWxpemFkbyIsCiAgICAgICAgYEhhcyBlZGl0YWRvIHR1IHByZWd1bnRhIGV4aXRvc2FtZW50ZWAKICAgICAgKTsKICAgICAgdGhpcy5nZXRRdWVzdGlvbnNBbndlcigpOwogICAgfSwKICAgIHF1ZXN0aW9uRGVsZXRlZCgpIHsKICAgICAgYWxlcnRGdW5jdGlvbigic3VjY2VzcyIsICJCb3JyYWRhISIsICJUdSBwcmVndW50YSBoYSBzaWRvIGJvcnJhZGEuIik7CiAgICAgIHRoaXMuZ2V0UXVlc3Rpb25zQW53ZXIoKTsKICAgIH0sCiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRRdWVzdGlvbnNBbndlcigpOwogIH0sCn07Cg=="},{"version":3,"sources":["UserQuestions.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UserQuestions.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"container\">\n    <span id=\"sectionTitle\">\n      <h1>Tus preguntas</h1>\n      <h2>Aquí puedes ver las preguntas que has realizado</h2>\n    </span>\n\n    <getquestions\n      id=\"questionsBody\"\n      :questions=\"questions\"\n      :answers=\"answers\"\n      @showAnswers=\"getAnswersById\"\n      @rateAnswer=\"rateAnswer\"\n      @editquestion=\"getQuestionData\"\n      @questionDeleted=\"questionDeleted\"\n      @questionEdited=\"questionEdited\"\n    />\n\n    <div class=\"emptyState\" v-show=\"noQuestions\">\n      <p>Aww... aun no has preguntado nada aún</p>\n      <h2>¡Haz tu primera pregunta!</h2>\n      <router-link class=\"button\" :to=\"{ name: 'NewQuestion' }\">Hacer pregunta</router-link>\n    </div>\n  </div>\n</template>\n\n<script>\n//STORAGE DE LOS DATOS DE USUARIO\nimport userData from \"@/dataStorage/userData\";\nimport axios from \"axios\";\nimport api from \"@/api/api.js\";\n\nimport getquestions from \"@/components/GetQuestions.vue\";\n\nimport {\n  getAuthToken,\n  getIdToken,\n  alertFunction,\n  config,\n  ENDPOINT,\n} from \"../utils/helpers\";\n\nexport default {\n  name: \"UserQuestions\",\n  components: {\n    getquestions,\n  },\n  data() {\n    return {\n      questions: [],\n      answers: [],\n      noQuestions: false,\n\n      //variables de gestion de errores\n      showError: false,\n      errorMessage: \"\",\n\n      sharedStore: userData.state,\n    };\n  },\n\n  computed: {\n    token() {\n      return this.sharedStore.token;\n    },\n    route() {\n      return this.$route.name;\n    },\n  },\n  methods: {\n    //TRAER LAS PREGUNTAS QUE HA HECHO EL USUARIO DESDE LA BBDD\n    async getQuestionsAnwer() {\n      try {\n        const response = await api.userQuestions();\n        this.questions = response;\n\n        if (this.questions.length === 0) {\n          this.noQuestions = true;\n        }\n      } catch (error) {\n        this.showError = true;\n        this.errorMessage = error;\n      }\n    },\n    //TRAER LAS RESPUESTA DE LA PREGUNTA SELECCIONADA SI ES USUARIO LOGUEADO\n    async getAnswersById(idQuestion) {\n      try {\n        const response = await api.getAnswers(idQuestion);\n        this.answers = response;\n      } catch (error) {\n        this.showError = true;\n        this.errorMessage = error;\n      }\n    },\n    //VOTAR UNA RESPUESTA\n    async rateAnswer(data) {\n      try {\n        const response = await api.postRating(data);\n\n        alertFunction(\n          \"success\",\n          \"Ranking\",\n          `¡Has Votado con ${data.rating} puntos!`\n        );\n      } catch (error) {\n        await alertFunction(\"error\", \"Opss!\", `Ya has votado esta respuesta`);\n      }\n    },\n\n    async getQuestionData(id) {\n      this.hideQuestion = true;\n\n      try {\n        const response = await axios.get(ENDPOINT + \"/question/\" + id, {\n          headers: {\n            Authorization: this.token,\n          },\n        });\n\n        this.title = response.data.data.title;\n        this.content = response.data.data.question_text;\n        this.idQuestion = id;\n      } catch (error) {\n        console.error(error);\n      }\n    },\n    questionEdited() {\n      //ALERT DE EDITAR\n      alertFunction(\n        \"success\",\n        \"Actualizado\",\n        `Has editado tu pregunta exitosamente`\n      );\n      this.getQuestionsAnwer();\n    },\n    questionDeleted() {\n      alertFunction(\"success\", \"Borrada!\", \"Tu pregunta ha sido borrada.\");\n      this.getQuestionsAnwer();\n    },\n  },\n  created() {\n    this.getQuestionsAnwer();\n  },\n};\n</script>\n\n<style scoped>\n* {\n  text-align: left;\n  margin-bottom: 1rem;\n}\n</style>\n"]}]}