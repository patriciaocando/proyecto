{"remainingRequest":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/patricia/hackaboss/PROYECTO/frontend/frontend/src/views/Profile.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/src/views/Profile.vue","mtime":1596571633923},{"path":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBTd2FsIGZyb20gInN3ZWV0YWxlcnQyIjsKaW1wb3J0IHsgZ2V0QXV0aFRva2VuLCBnZXRJZFRva2VuLCBhbGVydEZ1bmN0aW9uIH0gZnJvbSAiLi4vdXRpbHMvaGVscGVycyI7CgppbXBvcnQgdXNlcnByb2ZpbGUgZnJvbSAiQC9jb21wb25lbnRzL1VzZXJQcm9maWxlLnZ1ZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiUHJvZmlsZSIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHByb2ZpbGU6IHt9LAogICAgICAvL3ZhcmlhYmxlcyBkZSBnZXN0aW9uIGRlIGVycm9yZXMKICAgICAgc2hvd0Vycm9yOiBmYWxzZSwKICAgICAgZXJyb3JNZXNzYWdlOiAiIiwKICAgICAgLy9UT0tFTgogICAgICB0b2tlbjogZ2V0QXV0aFRva2VuKCksCiAgICB9OwogIH0sCiAgY29tcG9uZW50czogewogICAgdXNlcnByb2ZpbGUsCiAgfSwKCiAgbWV0aG9kczogewogICAgYXN5bmMgdXBkYXRlVXNlckRhdGEodXNlckRhdGEpIHsKICAgICAgLy9EQVRPUyBERUwgVVNVQVJJTwogICAgICBsZXQgZGF0YSA9IHsKICAgICAgICBuYW1lOiB1c2VyRGF0YS5uYW1lLAogICAgICAgIGxhc3RfbmFtZTogdXNlckRhdGEubGFzdG5hbWUsCiAgICAgICAgdXNlcm5hbWU6IHVzZXJEYXRhLnVzZXJuYW1lLAogICAgICAgIGVtYWlsOiB1c2VyRGF0YS5lbWFpbCwKICAgICAgICBwcm9maWxlX2JpbzogdXNlckRhdGEucHJvZmlsZSwKICAgICAgfTsKICAgICAgLy9DQUJFQ0VEQSBERSBVQVRPUklaQUNJT04KICAgICAgbGV0IGNvbmZpZyA9IHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICBBdXRob3JpemF0aW9uOiB0aGlzLnRva2VuLAogICAgICAgIH0sCiAgICAgIH07CgogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MucHV0KAogICAgICAgICAgImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC91c2Vycy9lZGl0LXByb2ZpbGUvIiArIHVzZXJEYXRhLmlkLAogICAgICAgICAgZGF0YSwKICAgICAgICAgIGNvbmZpZwogICAgICAgICk7CiAgICAgICAgLy9BTEVSVCBERSBFRElUQVIKICAgICAgICBhbGVydEZ1bmN0aW9uKAogICAgICAgICAgInN1Y2Nlc3MiLAogICAgICAgICAgIkFjdHVhbGl6YWRvIiwKICAgICAgICAgIGBIYXMgZWRpdGFkbyBsb3MgZGF0b3MgZGUgJHtkYXRhLnVzZXJuYW1lfSBleGl0b3NhbWVudGVgCiAgICAgICAgKTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICB0aGlzLnNob3dFcnJvciA9IHRydWU7CiAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2UgPSBlcnJvci5yZXNwb25zZS5kYXRhLm1lc3NhZ2U7CiAgICAgIH0KICAgIH0sCiAgICAvL1RSQUlHTyBMQSBJTkZPIERFTCBQRVJGSUwgREUgVVNVQVJJTyBERSBMQSBCQkRECiAgICBhc3luYyBnZXRVc2VyUHJvZmlsZSgpIHsKICAgICAgLy9DQUJFQ0VSQSBERSBBVVRPUklaQUNJT04KICAgICAgbGV0IGNvbmZpZyA9IHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICBBdXRob3JpemF0aW9uOiB0aGlzLnRva2VuLAogICAgICAgIH0sCiAgICAgIH07CgogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KAogICAgICAgICAgImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC91c2Vycy9wcm9maWxlLyIgKyBnZXRJZFRva2VuKHRoaXMudG9rZW4pLAogICAgICAgICAgY29uZmlnCiAgICAgICAgKTsKICAgICAgICB0aGlzLnByb2ZpbGUgPSByZXNwb25zZS5kYXRhLmRhdGE7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgdGhpcy5zaG93RXJyb3IgPSB0cnVlOwogICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gZXJyb3I7CiAgICAgIH0KICAgIH0sCiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRVc2VyUHJvZmlsZSgpOwogIH0sCn07Cg=="},{"version":3,"sources":["Profile.vue"],"names":[],"mappings":";;;;;;;;AAQA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Profile.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <p v-show=\"showError\">{{ errorMessage }}</p>\n    <userprofile v-on:iduserupdate=\"updateUserData\" :userdata=\"profile\" />\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport Swal from \"sweetalert2\";\nimport { getAuthToken, getIdToken, alertFunction } from \"../utils/helpers\";\n\nimport userprofile from \"@/components/UserProfile.vue\";\nexport default {\n  name: \"Profile\",\n  data() {\n    return {\n      profile: {},\n      //variables de gestion de errores\n      showError: false,\n      errorMessage: \"\",\n      //TOKEN\n      token: getAuthToken(),\n    };\n  },\n  components: {\n    userprofile,\n  },\n\n  methods: {\n    async updateUserData(userData) {\n      //DATOS DEL USUARIO\n      let data = {\n        name: userData.name,\n        last_name: userData.lastname,\n        username: userData.username,\n        email: userData.email,\n        profile_bio: userData.profile,\n      };\n      //CABECEDA DE UATORIZACION\n      let config = {\n        headers: {\n          Authorization: this.token,\n        },\n      };\n\n      try {\n        const response = await axios.put(\n          \"http://localhost:3000/users/edit-profile/\" + userData.id,\n          data,\n          config\n        );\n        //ALERT DE EDITAR\n        alertFunction(\n          \"success\",\n          \"Actualizado\",\n          `Has editado los datos de ${data.username} exitosamente`\n        );\n      } catch (error) {\n        this.showError = true;\n        this.errorMessage = error.response.data.message;\n      }\n    },\n    //TRAIGO LA INFO DEL PERFIL DE USUARIO DE LA BBDD\n    async getUserProfile() {\n      //CABECERA DE AUTORIZACION\n      let config = {\n        headers: {\n          Authorization: this.token,\n        },\n      };\n\n      try {\n        const response = await axios.get(\n          \"http://localhost:3000/users/profile/\" + getIdToken(this.token),\n          config\n        );\n        this.profile = response.data.data;\n      } catch (error) {\n        this.showError = true;\n        this.errorMessage = error;\n      }\n    },\n  },\n  created() {\n    this.getUserProfile();\n  },\n};\n</script>\n\n<style scoped></style>\n"]}]}