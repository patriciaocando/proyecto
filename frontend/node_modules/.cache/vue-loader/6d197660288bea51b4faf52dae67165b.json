{"remainingRequest":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/patricia/hackaboss/PROYECTO/frontend/frontend/src/views/UserAnswers.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/src/views/UserAnswers.vue","mtime":1596926668421},{"path":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBTd2FsIGZyb20gInN3ZWV0YWxlcnQyIjsKaW1wb3J0IHsKICBnZXRBdXRoVG9rZW4sCiAgZ2V0SWRUb2tlbiwKICBhbGVydEZ1bmN0aW9uLAogIGNvbmZpZywKICBFTkRQT0lOVCwKfSBmcm9tICIuLi91dGlscy9oZWxwZXJzIjsKCmltcG9ydCBhbnN3ZXJjb21wb25lbnQgZnJvbSAiQC9jb21wb25lbnRzL0Fuc3dlckNvbXBvbmVudC52dWUiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJVc2VyQW5zd2VycyIsCiAgY29tcG9uZW50czogewogICAgYW5zd2VyY29tcG9uZW50LAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIC8vVmFyaWFibGUgZGUgY29tcG9uZW50ZQogICAgICBlZGl0QW5zd2VyOiBmYWxzZSwKICAgICAgLy9WYXJpYWJsZSBkZSB2aXN0YQogICAgICBiYmRkQW5zd2VyczogW10sCiAgICAgIGN1cnJlbnRBbnN3ZXI6ICIiLAogICAgICBpZEFuc3dlckVkaXQ6ICIiLAogICAgICAvL3ZhcmlhYmxlcyBkZSBnZXN0aW9uIGRlIGVycm9yZXMKICAgICAgc2hvd0Vycm9yOiBmYWxzZSwKICAgICAgZXJyb3JNZXNzYWdlOiAiIiwKCiAgICAgIC8vVE9LRU4KICAgICAgdG9rZW46IGdldEF1dGhUb2tlbigpLAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vVFJBRVIgREVTREUgRUwgQ09NUE9ORU5URSBMT1MgREFUT1MgREUgTEEgUFJFR1VOVEEgUEFSQSBFRElUQVIKICAgIGdldENvbXBvbmVudERhdGEoZGF0YSkgewogICAgICB0aGlzLmVkaXRBbnN3ZXIgPSB0cnVlOwogICAgICB0aGlzLmN1cnJlbnRBbnN3ZXIgPSBkYXRhLmN1cnJlbnRBbnN3ZXI7CiAgICAgIHRoaXMuaWRBbnN3ZXJFZGl0ID0gZGF0YS5pZDsKICAgICAgY29uc29sZS5sb2coZGF0YSk7CiAgICB9LAogICAgLy9UUkFFUiBSRVNQVUVTVEFTIEhFQ0hBUyBQT1IgRUwgVVNVQVJJTyBERVNERSBMQSBCQkRECiAgICBhc3luYyBnZXRBbnN3ZXJzKCkgewogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KEVORFBPSU5UICsgIi9hbnN3ZXIiLCBjb25maWcpOwogICAgICAgIHRoaXMuYmJkZEFuc3dlcnMgPSByZXNwb25zZS5kYXRhLmRhdGE7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgdGhpcy5zaG93RXJyb3IgPSB0cnVlOwogICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gZXJyb3IucmVzcG9uc2UuZGF0YS5tZXNzYWdlOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgcG9zdEVkaXRlZEFuc3dlcihpZCkgewogICAgICB0cnkgewogICAgICAgIGxldCBkYXRhID0gewogICAgICAgICAgY29udGVudDogdGhpcy5jdXJyZW50QW5zd2VyLAogICAgICAgIH07CgogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MucHV0KAogICAgICAgICAgRU5EUE9JTlQgKyAiL2VkaXQtYW5zd2VyLyIgKyBpZCwKICAgICAgICAgIGRhdGEsCiAgICAgICAgICBjb25maWcKICAgICAgICApOwoKICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICB0aGlzLnNob3dFcnJvciA9IHRydWU7CiAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2UgPSBlcnJvci5yZXNwb25zZS5kYXRhLm1lc3NhZ2U7CiAgICAgIH0KICAgIH0sCgogICAgYXN5bmMgZGVsZXRlQW5zd2VyKGlkQW5zd2VyKSB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5kZWxldGUoCiAgICAgICAgICBFTkRQT0lOVCArICIvZGVsZXRlLWFuc3dlci8iICsgaWRBbnN3ZXIsCiAgICAgICAgICBjb25maWcKICAgICAgICApOwoKICAgICAgICBhbGVydEZ1bmN0aW9uKCJCb3JyYWRhISIsICJUdSByZXNwdWVzdGEgaGEgc2lkbyBib3JyYWRhLiIsICJzdWNjZXNzIik7CgogICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIHRoaXMuc2hvd0Vycm9yID0gdHJ1ZTsKICAgICAgICB0aGlzLmVycm9yTWVzc2FnZSA9IGVycm9yLnJlc3BvbnNlLmRhdGEubWVzc2FnZTsKICAgICAgfQogICAgfSwKICAgIGNhbmNlbFJlcXVlc3QoKSB7CiAgICAgIHRoaXMuZWRpdEFuc3dlciA9IGZhbHNlOwogICAgICBsb2NhdGlvbi5yZWxvYWQoKTsKICAgIH0sCiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRBbnN3ZXJzKCk7CiAgfSwKfTsK"},{"version":3,"sources":["UserAnswers.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAwBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UserAnswers.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <div>\n      <p v-show=\"showError\">{{ errorMessage }}</p>\n      <answercomponent\n        :answers=\"bbddAnswers\"\n        v-on:editedAnswer=\"getComponentData\"\n        v-on:deleteAnswer=\"deleteAnswer\"\n      />\n      <!--EDITAR RESPUESTA-->\n      <div v-show=\"editAnswer\" class=\"answerEdit\">\n        <div>\n          <textarea type=\"text\" name=\"textAnswer\" rows=\"4\" v-model=\"currentAnswer\"></textarea>\n\n          <button @click=\"deleteAnswer(idAnswerEdit)\">Borrar respuesta</button>\n        </div>\n        <button @click=\"postEditedAnswer(idAnswerEdit)\">GUARDAR</button>\n        <button @click=\"cancelRequest()\">CANCELAR</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport Swal from \"sweetalert2\";\nimport {\n  getAuthToken,\n  getIdToken,\n  alertFunction,\n  config,\n  ENDPOINT,\n} from \"../utils/helpers\";\n\nimport answercomponent from \"@/components/AnswerComponent.vue\";\n\nexport default {\n  name: \"UserAnswers\",\n  components: {\n    answercomponent,\n  },\n  data() {\n    return {\n      //Variable de componente\n      editAnswer: false,\n      //Variable de vista\n      bbddAnswers: [],\n      currentAnswer: \"\",\n      idAnswerEdit: \"\",\n      //variables de gestion de errores\n      showError: false,\n      errorMessage: \"\",\n\n      //TOKEN\n      token: getAuthToken(),\n    };\n  },\n  methods: {\n    //TRAER DESDE EL COMPONENTE LOS DATOS DE LA PREGUNTA PARA EDITAR\n    getComponentData(data) {\n      this.editAnswer = true;\n      this.currentAnswer = data.currentAnswer;\n      this.idAnswerEdit = data.id;\n      console.log(data);\n    },\n    //TRAER RESPUESTAS HECHAS POR EL USUARIO DESDE LA BBDD\n    async getAnswers() {\n      try {\n        const response = await axios.get(ENDPOINT + \"/answer\", config);\n        this.bbddAnswers = response.data.data;\n      } catch (error) {\n        this.showError = true;\n        this.errorMessage = error.response.data.message;\n      }\n    },\n    async postEditedAnswer(id) {\n      try {\n        let data = {\n          content: this.currentAnswer,\n        };\n\n        const response = await axios.put(\n          ENDPOINT + \"/edit-answer/\" + id,\n          data,\n          config\n        );\n\n        location.reload();\n      } catch (error) {\n        this.showError = true;\n        this.errorMessage = error.response.data.message;\n      }\n    },\n\n    async deleteAnswer(idAnswer) {\n      try {\n        const response = await axios.delete(\n          ENDPOINT + \"/delete-answer/\" + idAnswer,\n          config\n        );\n\n        alertFunction(\"Borrada!\", \"Tu respuesta ha sido borrada.\", \"success\");\n\n        location.reload();\n      } catch (error) {\n        this.showError = true;\n        this.errorMessage = error.response.data.message;\n      }\n    },\n    cancelRequest() {\n      this.editAnswer = false;\n      location.reload();\n    },\n  },\n  created() {\n    this.getAnswers();\n  },\n};\n</script>\n\n<style scoped></style>\n"]}]}