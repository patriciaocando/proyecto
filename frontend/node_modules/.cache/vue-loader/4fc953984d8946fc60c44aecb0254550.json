{"remainingRequest":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/patricia/hackaboss/PROYECTO/frontend/frontend/src/views/NewQuestion.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/src/views/NewQuestion.vue","mtime":1596570891813},{"path":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBsYW5ndWFnZXNzZWxlY3RvciBmcm9tICJAL2NvbXBvbmVudHMvTGFuZ3VhZ2VTZWxlY3Rvci52dWUiOwoKaW1wb3J0IHsgZ2V0QXV0aFRva2VuLCBnZXRJZFRva2VuLCBhbGVydEZ1bmN0aW9uIH0gZnJvbSAiLi4vdXRpbHMvaGVscGVycyI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIk5ld1F1ZXN0aW9uIiwKICBjb21wb25lbnRzOiB7CiAgICBsYW5ndWFnZXNzZWxlY3RvciwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICAvL3ZhcmlhYmxlcyBkZSB2aXN0YQogICAgICB0aXRsZTogIiIsCiAgICAgIGNvbnRlbnQ6ICIiLAogICAgICBsYW5ndWFnZTogIiIsCiAgICAgIC8vdmFyaWFibGVzIGRlIGdlc3Rpb24gZGUgZXJyb3JlcwogICAgICBzaG93RXJyb3I6IGZhbHNlLAogICAgICBlcnJvck1lc3NhZ2U6ICIiLAogICAgICAvL3ZhcmlhbGVzIGRlIGNvbXBvbmVudGVzCiAgICAgIGxhbmd1YWdlczogW10sCiAgICAgIC8vVE9LRU4KICAgICAgdG9rZW46IGdldEF1dGhUb2tlbigpLAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vVFJBRVIgTE9TIExFTkdVQUdFUyBERSBMQSBCQkRECiAgICBhc3luYyBnZXRMYW5ndWFnZXMoKSB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9sYW5ndWFnZXMiKTsKICAgICAgICB0aGlzLmxhbmd1YWdlcyA9IHJlc3BvbnNlLmRhdGEuZGF0YTsKICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgdGhpcy5zaG93RXJyb3IgPSB0cnVlOwogICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gZXJyb3IucmVzcG9uc2UuZGF0YS5tZXNzYWdlOwogICAgICB9CiAgICB9LAogICAgLy9UUkFFUiBFTCBMRU5HVUFHRSBFU0NPR0lETyBERUwgQ09NUE9ORU5URS9TRUxFQ1QgTEVOR1VBSkVTCiAgICBnZXRDb21wb25lbnRMYW5ndWFnZShsYW5ndWFnZUlkKSB7CiAgICAgIHRoaXMubGFuZ3VhZ2UgPSBsYW5ndWFnZUlkOwogICAgfSwKICAgIC8vUFVCTElDQVIgTEEgUkVTUFVFU1RBCiAgICBhc3luYyBwb3N0UXVlc3Rpb24oKSB7CiAgICAgIC8vUkVDT0pPIExPUyBEQVRPUyBQQVJBIEVOVklBUiBFTiBFTCBCT0RZCiAgICAgIGxldCBkYXRhID0gewogICAgICAgIHRpdGxlOiB0aGlzLnRpdGxlLAogICAgICAgIGNvbnRlbnQ6IHRoaXMuY29udGVudCwKICAgICAgICBsYW5ndWFnZTogdGhpcy5sYW5ndWFnZSwKICAgICAgfTsKICAgICAgLy9DT05GSUdVUk8gRUwgT0JKRVRPIERFIENPTkZJR1VSQUNJT04KICAgICAgbGV0IGNvbmZpZyA9IHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICBBdXRob3JpemF0aW9uOiB0aGlzLnRva2VuLAogICAgICAgIH0sCiAgICAgIH07CiAgICAgIC8vQ09NUFJVRUJPIFFVRSBMT1MgREFUT1MgTk9FIFNURU4gVkFDSU9TCiAgICAgIGlmIChkYXRhLnRpdGxlID09PSAiIiB8fCBkYXRhLmNvbnRlbnQgPT09ICIiIHx8IGRhdGEubGFuZ3VhZ2UgPT09ICIiKSB7CiAgICAgICAgYWxlcnRGdW5jdGlvbigKICAgICAgICAgICJ3YXJuaW5nIiwKICAgICAgICAgICJDYW1wb3MgVmFjw61vcyIsCiAgICAgICAgICAiRGViZXMgbGxlbmFyIHRvZG9zIGxvcyBjYW1wb3MgcGFyYSBwdWJsaWNhciB0dSBwcmVndW50YSIKICAgICAgICApOwogICAgICB9IGVsc2UgewogICAgICAgIHRyeSB7CiAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLnBvc3QoCiAgICAgICAgICAgICJodHRwOi8vbG9jYWxob3N0OjMwMDAvbmV3LXF1ZXN0aW9uIiwKICAgICAgICAgICAgZGF0YSwKICAgICAgICAgICAgY29uZmlnCiAgICAgICAgICApOwogICAgICAgICAgLy9BTEVSVCBERSBDUkVBQ0lPTiBERSBQUkVHVU5UQQogICAgICAgICAgYWxlcnRGdW5jdGlvbigKICAgICAgICAgICAgInN1Y2Nlc3MiLAogICAgICAgICAgICAiUHJlZ3VudGEgcHVibGljYWRhIiwKICAgICAgICAgICAgIlNlIGhhIHB1YmxpY2FkbyB0dSBwcmVndW50YSBleGl0b3NhbWVudGUuIgogICAgICAgICAgKTsKICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvbWlzLXByZWd1bnRhcyIpOwogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICB0aGlzLnNob3dFcnJvciA9IHRydWU7CiAgICAgICAgICB0aGlzLmVycm9yTWVzc2FnZSA9IGVycm9yLnJlc3BvbnNlLmRhdGEubWVzc2FnZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRMYW5ndWFnZXMoKTsKICB9LAp9Owo="},{"version":3,"sources":["NewQuestion.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAiBA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"NewQuestion.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <div>\n      <h3>TITULO:</h3>\n      <input type=\"text\" placeholder=\"Este es el título de tu pregunta..\" v-model=\"title\" />\n      <languagesselector :languages=\"languages\" v-on:languageId=\"getComponentLanguage\" />\n      <h3>Escribe tu pregunta:</h3>\n      <textarea name=\"textQuestion\" rows=\"4\" placeholder=\"Haz tu pregunta...\" v-model=\"content\"></textarea>\n      <p v-show=\"showError\">{{ errorMessage }}</p>\n\n      <button @click=\"postQuestion()\">Publicar</button>\n      <button class=\"cancelButton\" @click=\"postQuestion()\">Cancelar</button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport languagesselector from \"@/components/LanguageSelector.vue\";\n\nimport { getAuthToken, getIdToken, alertFunction } from \"../utils/helpers\";\n\nexport default {\n  name: \"NewQuestion\",\n  components: {\n    languagesselector,\n  },\n  data() {\n    return {\n      //variables de vista\n      title: \"\",\n      content: \"\",\n      language: \"\",\n      //variables de gestion de errores\n      showError: false,\n      errorMessage: \"\",\n      //variales de componentes\n      languages: [],\n      //TOKEN\n      token: getAuthToken(),\n    };\n  },\n  methods: {\n    //TRAER LOS LENGUAGES DE LA BBDD\n    async getLanguages() {\n      try {\n        const response = await axios.get(\"http://localhost:3000/languages\");\n        this.languages = response.data.data;\n        console.log(response);\n      } catch (error) {\n        this.showError = true;\n        this.errorMessage = error.response.data.message;\n      }\n    },\n    //TRAER EL LENGUAGE ESCOGIDO DEL COMPONENTE/SELECT LENGUAJES\n    getComponentLanguage(languageId) {\n      this.language = languageId;\n    },\n    //PUBLICAR LA RESPUESTA\n    async postQuestion() {\n      //RECOJO LOS DATOS PARA ENVIAR EN EL BODY\n      let data = {\n        title: this.title,\n        content: this.content,\n        language: this.language,\n      };\n      //CONFIGURO EL OBJETO DE CONFIGURACION\n      let config = {\n        headers: {\n          Authorization: this.token,\n        },\n      };\n      //COMPRUEBO QUE LOS DATOS NOE STEN VACIOS\n      if (data.title === \"\" || data.content === \"\" || data.language === \"\") {\n        alertFunction(\n          \"warning\",\n          \"Campos Vacíos\",\n          \"Debes llenar todos los campos para publicar tu pregunta\"\n        );\n      } else {\n        try {\n          const response = await axios.post(\n            \"http://localhost:3000/new-question\",\n            data,\n            config\n          );\n          //ALERT DE CREACION DE PREGUNTA\n          alertFunction(\n            \"success\",\n            \"Pregunta publicada\",\n            \"Se ha publicado tu pregunta exitosamente.\"\n          );\n          this.$router.push(\"/mis-preguntas\");\n        } catch (error) {\n          this.showError = true;\n          this.errorMessage = error.response.data.message;\n        }\n      }\n    },\n  },\n  created() {\n    this.getLanguages();\n  },\n};\n</script>\n\n<style scoped>\n</style>"]}]}