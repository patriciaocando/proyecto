{"remainingRequest":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/patricia/hackaboss/PROYECTO/frontend/frontend/src/views/UserQuestions.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/src/views/UserQuestions.vue","mtime":1596572922702},{"path":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/patricia/hackaboss/PROYECTO/frontend/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBTd2FsIGZyb20gInN3ZWV0YWxlcnQyIjsKaW1wb3J0IHsgZ2V0QXV0aFRva2VuLCBnZXRJZFRva2VuLCBhbGVydEZ1bmN0aW9uIH0gZnJvbSAiLi4vdXRpbHMvaGVscGVycyI7CgppbXBvcnQgU2hvd1F1ZXN0aW9uc0Fuc3dlciBmcm9tICJAL2NvbXBvbmVudHMvR2V0UXVlc3Rpb25BbnN3ZXIudnVlIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiVXNlclF1ZXN0aW9ucyIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIFVzZXJRdWVzdGlvbjogW10sCiAgICAgIFVzZXJBbnN3ZXJzOiBbXSwKICAgICAgdG9rZW46IGdldEF1dGhUb2tlbigpLAogICAgICBoaWRlUXVlc3Rpb246IGZhbHNlLAogICAgICBzaG93UXVlc3Rpb246IHRydWUsCiAgICAgIG5vUXVlc3Rpb25zOiBmYWxzZSwKICAgICAgY291bnQ6ICIiLAoKICAgICAgLy92YXJpYWJsZXMgZGUgZ2VzdGlvbiBkZSBlcnJvcmVzCiAgICAgIHNob3dFcnJvcjogZmFsc2UsCiAgICAgIGVycm9yTWVzc2FnZTogIiIsCgogICAgICAvL1ZhcmlhYmxlcyBkZSBjb21wb25lbnRlCiAgICAgIHRpdGxlOiAiIiwKICAgICAgY29udGVudDogIiIsCiAgICAgIGlkUXVlc3Rpb246ICIiLAogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIFNob3dRdWVzdGlvbnNBbnN3ZXIsCiAgfSwKCiAgbWV0aG9kczogewogICAgLy9ERVNERSBMQSBWSVNUQQogICAgY2FuY2VsRWRpdGlvbigpIHsKICAgICAgdGhpcy50aXRsZSA9ICIiOwogICAgICB0aGlzLmNvbnRlbnQgPSAiIjsKICAgICAgdGhpcy5oaWRlUXVlc3Rpb24gPSBmYWxzZTsKICAgICAgdGhpcy5zaG93UXVlc3Rpb24gPSB0cnVlOwogICAgfSwKICAgIC8vREVTREUgRUwgQ09NUE9ORU5URQogICAgZ2V0UXVlc3Rpb25EYXRhKHF1ZXN0aW9uRGF0YSkgewogICAgICB0aGlzLmhpZGVRdWVzdGlvbiA9IHRydWU7CiAgICAgIHRoaXMuc2hvd1F1ZXN0aW9uID0gZmFsc2U7CiAgICAgIHRoaXMudGl0bGUgPSBxdWVzdGlvbkRhdGEudGl0bGU7CiAgICAgIHRoaXMuY29udGVudCA9IHF1ZXN0aW9uRGF0YS5xdWVzdGlvbl90ZXh0OwogICAgICB0aGlzLmlkUXVlc3Rpb24gPSBxdWVzdGlvbkRhdGEuaWQ7CiAgICB9LAogICAgLy9ERVNERSBMQSBCQkRECiAgICBhc3luYyBnZXRRdWVzdGlvbnNBbndlcigpIHsKICAgICAgLy9DQUJFQ0VSQSBERSBBVVRPUklaQUNJT04KICAgICAgbGV0IGNvbmZpZyA9IHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICBBdXRob3JpemF0aW9uOiB0aGlzLnRva2VuLAogICAgICAgIH0sCiAgICAgIH07CgogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KAogICAgICAgICAgImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9teS1xdWVzdGlvbnMvIiwKICAgICAgICAgIGNvbmZpZwogICAgICAgICk7CgogICAgICAgIGxldCByZXN1bHROdW1iZXIgPSByZXNwb25zZS5kYXRhLnJlc3VsdEFuc3dlcnM7CiAgICAgICAgaWYgKHJlc3VsdE51bWJlci5sZW5ndGggPT09IDApIHsKICAgICAgICAgIHRoaXMubm9RdWVzdGlvbnMgPSB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLlVzZXJRdWVzdGlvbiA9IHJlc3BvbnNlLmRhdGEucmVzdWx0QW5zd2VyczsKICAgICAgICB9CiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEucmVzdWx0QW5zd2Vyc1swXS5hbnN3ZXIubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICB0aGlzLmNvdW50ID0gIk5PIEhBWSBSRVNQVUVTVEFTIEHDmk4iOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmNvdW50ID0gcmVzcG9uc2UuZGF0YS5yZXN1bHRBbnN3ZXJzWzBdLmFuc3dlci5sZW5ndGg7CiAgICAgICAgICB0aGlzLlVzZXJBbnN3ZXJzID0gcmVzcG9uc2UuZGF0YS5yZXN1bHRBbnN3ZXJzWzBdLmFuc3dlcjsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgdGhpcy5zaG93RXJyb3IgPSB0cnVlOwogICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gZXJyb3IucmVzcG9uc2UuZGF0YS5tZXNzYWdlOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgc2F2ZUVkaXRpb24oKSB7CiAgICAgIC8vREFUQQogICAgICBsZXQgZGF0YSA9IHsKICAgICAgICB0aXRsZTogdGhpcy50aXRsZSwKICAgICAgICBjb250ZW50OiB0aGlzLmNvbnRlbnQsCiAgICAgIH07CgogICAgICAvL0NBQkVDRVJBIERFIEFVVE9SSVpBQ0lPTgogICAgICBsZXQgY29uZmlnID0gewogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgIEF1dGhvcml6YXRpb246IHRoaXMudG9rZW4sCiAgICAgICAgfSwKICAgICAgfTsKCiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5wdXQoCiAgICAgICAgICAiaHR0cDovL2xvY2FsaG9zdDozMDAwL2VkaXQtcXVlc3Rpb24vIiArIHRoaXMuaWRRdWVzdGlvbiwKICAgICAgICAgIGRhdGEsCiAgICAgICAgICBjb25maWcKICAgICAgICApOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIHRoaXMuc2hvd0Vycm9yID0gdHJ1ZTsKICAgICAgICB0aGlzLmVycm9yTWVzc2FnZSA9IGVycm9yLnJlc3BvbnNlLmRhdGEubWVzc2FnZTsKICAgICAgfQoKICAgICAgLy9BTEVSVCBERSBFRElUQVIKICAgICAgYWxlcnRGdW5jdGlvbigKICAgICAgICAic3VjY2VzcyIsCiAgICAgICAgIkFjdHVhbGl6YWRvIiwKICAgICAgICBgSGFzIGVkaXRhZG8gdHUgcHJlZ3VudGEgZXhpdG9zYW1lbnRlYAogICAgICApOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgfSwgMTAwMCk7CiAgICB9LAogIGFzeW5jIGRlbGV0ZVF1ZXN0aW9uKCkgewogICAgICAKICAgICAgLy9DQUJFQ0VSQSBERSBBVVRPUklaQUNJT04KICAgICAgbGV0IGNvbmZpZyA9IHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICBBdXRob3JpemF0aW9uOiB0aGlzLnRva2VuLAogICAgICAgIH0sCiAgICAgIH07CgogICAgICAvL0FMRVJUIERFIEVESVRBUgogICAgICBTd2FsLmZpcmUoewogICAgICAgIHRpdGxlOiAiwr9Fc3RhcyBzZWd1cm8gcXVlIHF1aWVyZXMgYm9ycmFyIGVzdGEgcHJlZ3VudGE/IiwKICAgICAgICAvKiB0ZXh0OiAiIiwgKi8KICAgICAgICBpY29uOiAid2FybmluZyIsCiAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICBjb25maXJtQnV0dG9uQ29sb3I6ICIjMzA4NWQ2IiwKICAgICAgICBjYW5jZWxCdXR0b25Db2xvcjogIiNkMzMiLAogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAiU8OtISwgQk9SUkFMQSIsCiAgICAgIH0pLnRoZW4oKHJlc3VsdCkgPT4gewogICAgICAgIGlmIChyZXN1bHQudmFsdWUpIHsKCiAgICAgICAgICB0cnkgewogICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmRlbGV0ZSgiaHR0cDovL2xvY2FsaG9zdDozMDAwL2RlbGV0ZS1xdWVzdGlvbi8iICsgdGhpcy5pZFF1ZXN0aW9uLAogICAgICAgICAgICAgIGNvbmZpZwogICAgICAgICAgICApOwogICAgICAgICAgICAKICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgdGhpcy5zaG93RXJyb3IgPSB0cnVlOwogICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gZXJyb3IucmVzcG9uc2UuZGF0YS5tZXNzYWdlOwogICAgICB9CiAgICAgICAgICBTd2FsLmZpcmUoIkJvcnJhZGEhIiwgIlR1IHByZWd1bnRhIGhhIHNpZG8gYm9ycmFkYS4iLCAic3VjY2VzcyIpOwoKICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICAgIH0sIDEwMDApOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0UXVlc3Rpb25zQW53ZXIoKTsKICB9LAp9Owo="},{"version":3,"sources":["UserQuestions.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UserQuestions.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <ShowQuestionsAnswer\n      :questions=\"UserQuestion\"\n      :answer=\"UserAnswers\"\n      :count=\"count\"\n      v-on:questionData=\"getQuestionData\"\n      v-show=\"showQuestion\"\n    />\n    <div v-show=\"noQuestions\">\n      <p>Aww... aun no has preguntado nada aún</p>\n      <p>¿Quieres hacer una?</p>\n      <router-link :to=\"{ name: 'NewQuestion' }\">Hacer pregunta</router-link>\n    </div>\n\n    <!--EDITAR PREGUNTA-->\n    <div v-show=\"hideQuestion\">\n      <h2>EDITAR PREGUNTA:</h2>\n      <h3>TITULO:</h3>\n      <input type=\"text\" :placeholder=\"title\" v-model=\"title\" />\n      <textarea type=\"text\" name=\"textQuestion\" rows=\"4\" :placeholder=\"content\" v-model=\"content\"></textarea>\n      <p v-show=\"showError\">{{ errorMessage }}</p>\n      <button @click=\"deleteQuestion()\">Borrar pregunta</button>\n      <div>\n        <button @click=\"saveEdition()\">GUARDAR</button>\n        <button class=\"cancelButton\" @click=\"cancelEdition()\">CANCELAR</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport Swal from \"sweetalert2\";\nimport { getAuthToken, getIdToken, alertFunction } from \"../utils/helpers\";\n\nimport ShowQuestionsAnswer from \"@/components/GetQuestionAnswer.vue\";\n\nexport default {\n  name: \"UserQuestions\",\n  data() {\n    return {\n      UserQuestion: [],\n      UserAnswers: [],\n      token: getAuthToken(),\n      hideQuestion: false,\n      showQuestion: true,\n      noQuestions: false,\n      count: \"\",\n\n      //variables de gestion de errores\n      showError: false,\n      errorMessage: \"\",\n\n      //Variables de componente\n      title: \"\",\n      content: \"\",\n      idQuestion: \"\",\n    };\n  },\n  components: {\n    ShowQuestionsAnswer,\n  },\n\n  methods: {\n    //DESDE LA VISTA\n    cancelEdition() {\n      this.title = \"\";\n      this.content = \"\";\n      this.hideQuestion = false;\n      this.showQuestion = true;\n    },\n    //DESDE EL COMPONENTE\n    getQuestionData(questionData) {\n      this.hideQuestion = true;\n      this.showQuestion = false;\n      this.title = questionData.title;\n      this.content = questionData.question_text;\n      this.idQuestion = questionData.id;\n    },\n    //DESDE LA BBDD\n    async getQuestionsAnwer() {\n      //CABECERA DE AUTORIZACION\n      let config = {\n        headers: {\n          Authorization: this.token,\n        },\n      };\n\n      try {\n        const response = await axios.get(\n          \"http://localhost:3000/my-questions/\",\n          config\n        );\n\n        let resultNumber = response.data.resultAnswers;\n        if (resultNumber.length === 0) {\n          this.noQuestions = true;\n        } else {\n          this.UserQuestion = response.data.resultAnswers;\n        }\n        if (response.data.resultAnswers[0].answer.length === 0) {\n          this.count = \"NO HAY RESPUESTAS AÚN\";\n        } else {\n          this.count = response.data.resultAnswers[0].answer.length;\n          this.UserAnswers = response.data.resultAnswers[0].answer;\n        }\n      } catch (error) {\n        this.showError = true;\n        this.errorMessage = error.response.data.message;\n      }\n    },\n    async saveEdition() {\n      //DATA\n      let data = {\n        title: this.title,\n        content: this.content,\n      };\n\n      //CABECERA DE AUTORIZACION\n      let config = {\n        headers: {\n          Authorization: this.token,\n        },\n      };\n\n      try {\n        const response = await axios.put(\n          \"http://localhost:3000/edit-question/\" + this.idQuestion,\n          data,\n          config\n        );\n      } catch (error) {\n        this.showError = true;\n        this.errorMessage = error.response.data.message;\n      }\n\n      //ALERT DE EDITAR\n      alertFunction(\n        \"success\",\n        \"Actualizado\",\n        `Has editado tu pregunta exitosamente`\n      );\n      setTimeout(function () {\n        location.reload();\n      }, 1000);\n    },\n  async deleteQuestion() {\n      \n      //CABECERA DE AUTORIZACION\n      let config = {\n        headers: {\n          Authorization: this.token,\n        },\n      };\n\n      //ALERT DE EDITAR\n      Swal.fire({\n        title: \"¿Estas seguro que quieres borrar esta pregunta?\",\n        /* text: \"\", */\n        icon: \"warning\",\n        showCancelButton: true,\n        confirmButtonColor: \"#3085d6\",\n        cancelButtonColor: \"#d33\",\n        confirmButtonText: \"Sí!, BORRALA\",\n      }).then((result) => {\n        if (result.value) {\n\n          try {\n            const response = await axios.delete(\"http://localhost:3000/delete-question/\" + this.idQuestion,\n              config\n            );\n            \n          } catch (error) {\n        this.showError = true;\n        this.errorMessage = error.response.data.message;\n      }\n          Swal.fire(\"Borrada!\", \"Tu pregunta ha sido borrada.\", \"success\");\n\n          setTimeout(function () {\n            location.reload();\n          }, 1000);\n        }\n      });\n    },\n  },\n  created() {\n    this.getQuestionsAnwer();\n  },\n};\n</script>\n\n<style scoped></style>\n"]}]}